---
title: Tidy Parallel Loading of Rdata Files
author: ''
date: '2018-06-14'
categories:
    - R
slug: tidy-parallel-loading-of-rdata-files
---



<p>In my last project, I have been using the following function a lot:</p>
<pre class="r"><code>load2env &lt;- function(file,env = new.env())
{
  load(file,envir = env)
  env
}</code></pre>
<p>This function load the RData file into the environment <code>env</code>, which will return. However, if we have multiple files to load simultaneously then we would like to load those files in parallel.</p>
<p>Using the new <a href="https://github.com/DavisVaughan/furrr">furrr</a> or any other package that allows parallel processing, we can do that by using something as:</p>
<pre class="r"><code>library(furrr)

plan(multiprocess)

my_data = tibble(
  files = list.files( my_dir ,full.names = TRUE )) %&gt;% 
  mutate(
    env = map(files,  ~ new.env()),
    data = future_map2( files, env, load2env   )
  )</code></pre>
<p>This command will create the environments in advance, and then load the content of the RData files into them.</p>
